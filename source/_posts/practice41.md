---
title: practice41
date: 2018-08-11 23:57:37
categories:
- practice
- 算法练习
tags:
- practice
- algorithm
---
问题描述：

有一个包含 20 亿个全是 32 为整数的大文件，在其中找到出现次数最多的数，但是内存限制只有 2G。

<!-- more -->

## 原理

### 一般方法

利用 hashmap 记录所有数出现的次数

	{
		key   ： 具体的某一种数
		value ： 这种数出现的次数
	}
	
此时，我们用 key 和 value 分别用 4 字节的整型表示。那么 hashmap 的一条记录占用 8 字节。

在极端条件下，如果所有的数都不一样，那么内存显然不够用。

### 分流

将大文件用 hash 进行分流，比如分成 16 个小文件，再将小文件交给 16 个节点处理。

每个节点分贝计算出最多的那个数，再将 16 个最多的数返回，最终综合 16 个文件中最多的数，就可以得到整个文件中 最多的数。

## 代码

略
