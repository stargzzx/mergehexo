---
title: gcc
date: 2019-10-27 19:29:50
categories:
- C
tags:
- C
- gcc
---
这个因为安装python库的时候，有的时候需要gcc来编译文件，所以，涉及到这方面的知识，在这里记录一下。
<!--more-->
什么是GCC？GCC是由GNU之父Stallman所开发的linux下的编译器，全称为GNU Compiler Collection， 目前可以编译的语言包括：C, C++, Objective-C, Fortran, Java, and Ada, 可以在其官方页面找到更加详细的信息什么是GCC？GCC是一个原本用于Unix-like系统下编程的编译器。不过，现在GCC也有了许多Win32下的移植版本。这要感谢Internet上众多程序员的共同努力。

GCC是GNU公社的一个项目。是一个用于编程开发的自由编译器。最初，GCC只是一个C语言编译器，他是GNU C Compiler 的英文缩写。随着众多自由开发者的加入和GCC自身的发展，如今的GCC以经是一个包含众多语言的编译器了。其中包括 C,C++,Ada,Object C和Java等。所以，GCC也由原来的GNU C Compiler变为GNU Compiler Collection。也就是 GNU编译器家族 的意思。当然，如今的GCC借助于他的特性，具有了交叉编译器的功能，即在一个平台下编译另一个平台的代码。

直到现在，GCC的历史仍然在继续，他的传奇仍然被人所传颂。GCC有什么作用？Linux系统下的Gcc（GNU C Compiler）是GNU推出的功能强大、性能优越的多平台编译器，是GNU的代表作品之一。gcc是可以在多种硬体平台上编译出可执行程序的超级编译器，其执行效率与一般的编译器相比平均效率要高20%~30%。GCC有什么作用？Gcc编译器能将C、C++语言源程序、汇程式化序和目标程序编译、连接成可执行文件，如果没有给出可执行文件的名字，gcc将生成一个名为a.out的文件。在Linux系统中，可执行文件没有统一的后缀，系统从文件的属性来区分可执行文件和不可执行文件。而gcc则通过后缀来区别输入文件的类别，下面我们来介绍gcc所遵循的部分约定规则。

	.c为后缀的文件，C语言源代码文件；
	.a为后缀的文件，是由目标文件构成的档案库文件；
	.C，.cc或.cxx 为后缀的文件，是C++源代码文件；
	.h为后缀的文件，是程序所包含的头文件；
	.i 为后缀的文件，是已经预处理过的C源代码文件；
	.ii为后缀的文件，是已经预处理过的C++源代码文件；
	.m为后缀的文件，是Objective-C源代码文件；
	.o为后缀的文件，是编译后的目标文件；
	.s为后缀的文件，是汇编语言源代码文件；
	.S为后缀的文件，是经过预编译的汇编语言源代码文件。

虽然我们称Gcc是C语言的编译器，但使用gcc由C语言源代码文件生成可执行文件的过程不仅仅是编译的过程，而是要经历四个相互关联的步骤∶预处理(也称预编译，Preprocessing)、编译(Compilation)、汇编(Assembly)和连接(Linking)。

命令gcc首先调用cpp进行预处理，在预处理过程中，对源代码文件中的文件包含(include)、预编译语句(如宏定义define等)进行分析。接着调用cc1进行编译，这个阶段根据输入文件生成以.o为后缀的目标文件。汇编过程是针对汇编语言的步骤，调用as进行工作，一般来讲，.S为后缀的汇编语言源代码文件和汇编、.s为后缀的汇编语言文件经过预编译和汇编之后都生成以.o为后缀的目标文件。当所有的目标文件都生成之后，gcc就调用ld来完成最后的关键性工作，这个阶段就是连接。在连接阶段，所有的目标文件被安排在可执行程序中的恰当的位置，同时，该程序所调用到的库函数也从各自所在的档案库中连到合适的地方。

在使用Gcc编译器的时候，我们必须给出一系列必要的调用参数和文件名称。Gcc编译器的调用参数大约有100多个，其中多数参数我们可能根本就用不到，这里只介绍其中最基本、最常用的参数。

Gcc最基本的用法是∶gcc [options] [filenames]

其中options就是编译器所需要的参数，filenames给出相关的文件名称。

-c，只编译，不连接成为可执行文件，编译器只是由输入的.c等源代码文件生成.o为后缀的目标文件，通常用于编译不包含主程序的子程序文件。

-o output_filename，确定输出文件的名称为output_filename，同时这个名称不能和源文件同名。如果不给出这个选项，gcc就给出预设的可执行文件a.out。

-g，产生符号调试工具(GNU的gdb)所必要的符号资讯，要想对源代码进行调试，我们就必须加入这个选项。

-O，对程序进行优化编译、连接，采用这个选项，整个源代码会在编译、连接过程中进行优化处理，这样产生的可执行文件的执行效率可以提高，但是，编译、连接的速度就相应地要慢一些。

-O2，比-O更好的优化编译、连接，当然整个编译、连接过程会更慢。

-Idirname，将dirname所指出的目录加入到程序头文件目录列表中，是在预编译过程中使用的参数。C程序中的头文件包含两种情况∶

	A)#include
	B)#include “myinc.h”
	
其中，A类使用尖括号(< >)，B类使用双引号(“ ”)。对于A类，预处理程序cpp在系统预设包含文件目录(如/usr/include)中搜寻相应的文件

