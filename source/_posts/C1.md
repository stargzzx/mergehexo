---
title: pointer in c
date: 2018-02-22 10:45:40
categories:
- C
tags:
- 指针
- pointer
- C
- basis
---
Everyone knows the magic of C is pointer.So i want to write about pointer,just experience no grammer.

<!--more-->

## what is pointer

Now I guess you should know the define of pointer,so i will show the detail.

```python
#include <stdio.h>

//now we should know the size of type

void printSize(){
	printf("%d\n",sizeof(char));              //1
	printf("%d\n",sizeof(int));               //4
	printf("%d\n",sizeof(long));              //4
	printf("%d\n",sizeof(unsigned long));     //4
	
	char a = '1';
	int b  = 1;
	long c = 1;
	
	printf("%d\n",sizeof(&a));                //8
	printf("%d\n",sizeof(&b));                //8
	printf("%d\n",sizeof(&c));                //8
	
	return;
}

int main(){
	printSize();
	
	int a  = 1;
	int* b = &a;                               
	printf("%d\n",&a);                         //&a is address
	printf("%d\n",*b);                         //*b is value
	
	int c[3] = {1,2,3};
	printf("%d\n",c);                          //c is address
	printf("%d\n",*c);                         //*c is the same as c[0]
	printf("%d\n",*(c+1));                     //*(c+1) is the same as c[1]
	return 0;
}
```

## How to use pointer in function

```python
#include <stdio.h>
#include <stdlib.h>

//in function,a and b as formal parameter,so compiler will
//create temporary space to store a and b.So you change
//variable value is temporary,it only uesful in the action 
//scope.
	
void swap1(int a,int b){  
	int tmp = a;         
	a       = b;		 
	b       = tmp;
	return;	 
}

//in function,we delivery variable's address.We call it as
//pointer.In fact,any address would point to variable.If we 
//change value by pointer.Finally,the variable will be changed

void swap2(int* a,int* b){ //this function can not swop variables.
	int* tmp = a;         //because tmp is address,so if variable's value is changed
	*a       = *b;		   //the value will be changed which address is same.
	*b       = *tmp;
	return;
}

void swap3(int* a,int* b){ //this function is right.
	int tmp  = *a;         
	*a       = *b;		   
	*b       = tmp;
	return;
}

void print(int* a,int* b){
	printf("first number:%d\n",*a);
	printf("second number:%d\n",*b);
}

int main(){
	int a = 1;

	int b = 2;
	swap1(a,b);
	print(&a,&b); //a = 1;b = 2;
	
	int a = 1;
	int b = 2;
	swap2(&a,&b);
	print(&a,&b); //a = 2;b = 2;
	
	int a = 1;
	int b = 2;
	swap3(&a,&b);
	print(&a,&b); //a = 2;b = 1;
}
```

## How to use pointer in struct

Ok,i define a struct.

```python
typedef struct ListNode{
	int val;
	struct ListNode* next;
};
```

How to use malloc?

malloc() is a function to apply for space.If you want to create a new variable then assignment data.You need to use malloc(),but sometimes you just want to get an address,so you only apply for a variable.

```python
ListNode* p = (struct ListNode*)malloc(sizeof(struct ListNode)); //to apply for space to save data
ListNode* l = p;			//l is a address to save the begining of list
```

I will keep updating.
